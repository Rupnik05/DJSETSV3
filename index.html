<!DOCTYPE html>
<html lang="en" data-theme="techvolley">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>planetcircle__ · DJ Sets</title>
  <meta name="description" content="Curated DJ sets by planetcircle__" />
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Crect width='100' height='100' rx='18' fill='%234676B6'/%3E%3Ccircle cx='50' cy='50' r='26' fill='%23E6E7DB'/%3E%3C/svg%3E">
  <style>
    :root{
      --radius:18px;
      --blue:#4676B6;        /* page bg */
      --text:#E6E7DB;        /* global text on blue */
      --surface:#ffffff;     /* card surface */
      --surface-2:#F7F9FC;   /* subtle gradient end */
      --ink:#0E1114;         /* text on white */
      --ink-muted:#5D6A78;   /* meta text on white */
      --border:rgba(13,19,27,.14);
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0; font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial; background:#4676B6; color:var(--text); -webkit-font-smoothing:antialiased}
    .wrap{max-width:1000px; margin:0 auto; padding:28px 16px 72px}

    header{display:flex; align-items:center; gap:14px; margin-bottom:12px}
    .pfp{position:relative}
    .pfp img{width:64px; height:64px; border-radius:50%; border:2px solid #fff}
    .ring{position:absolute; inset:-8px; border-radius:999px; background:conic-gradient(from 0deg,#fff3,#0000,#fff3); filter:blur(10px); opacity:.35}
    .titles{line-height:1.05}
    h1{font-size:28px; margin:0}
    .tagline{opacity:.92}

    .cta{display:flex; gap:10px; align-items:center; margin-left:auto}
    .link{display:inline-flex; gap:8px; align-items:center; padding:10px 12px; border-radius:12px; text-decoration:none; color:#fff; background:linear-gradient(180deg,rgba(0,0,0,.22),rgba(0,0,0,.32)); border:1px solid #ffffff33}
    .link:hover{border-color:#ffffff66}

    .grid{display:grid; grid-template-columns:repeat(auto-fit,minmax(250px,1fr)); gap:16px; margin-top:14px}
    .card{background:linear-gradient(180deg,var(--surface),var(--surface-2)); border:1px solid var(--border); border-radius:var(--radius); overflow:hidden; position:relative; box-shadow:0 6px 20px rgba(0,0,0,.12)}
    .thumb-wrap{aspect-ratio:16/9; background:#E9EEF5; position:relative}
    .thumb{width:100%; height:100%; object-fit:cover; display:block}
    .badge{position:absolute; left:8px; top:8px; background:#EAF1FB; color:#244E8E; border:1px solid rgba(70,118,182,.35); padding:4px 8px; font-size:11px; border-radius:999px}
    .duration{position:absolute; right:8px; bottom:8px; background:rgba(0,0,0,.55); color:#fff; padding:4px 6px; font-size:12px; border-radius:6px}
    .content{padding:12px; color:var(--ink)}
    .title{font-size:15px; margin:0 0 6px; line-height:1.3; color:var(--ink)}
    .meta{font-size:12px; color:var(--ink-muted)}
    .buttons{display:flex; gap:8px; margin-top:10px}
    .btn{flex:1; display:inline-flex; align-items:center; justify-content:center; gap:8px; padding:10px 12px; border-radius:10px; background:var(--blue); border:1px solid rgba(70,118,182,.6); color:#fff; text-decoration:none}
    .btn:hover{filter:brightness(1.05)}

    .brand-rail{position:fixed; left:10px; top:0; bottom:0; display:flex; align-items:center; z-index:0; opacity:.18}
    .brand-rail span{writing-mode:vertical-rl; transform:rotate(180deg); font-weight:800; letter-spacing:.1em; color:#fff; font-size:48px}
    @media (max-width:420px){ h1{font-size:24px} .pfp img{width:56px; height:56px} .brand-rail{display:none} }
  </style>
</head>
<body>
  <script>
    // --- Config (opens YouTube directly) ---
    const PROFILE = {
      avatarUrl: "https://raw.githubusercontent.com/Rupnik05/DJSETSV3/main/profile.jpeg",
      avatarAltUrl: "https://raw.githubusercontent.com/Rupnik05/DJSETSV3/a458aea3f57915ee0db19917c6d81f52199edf4c/profile.jpeg",
      displayName: "planetcircle__",
      tagline: "TechnoVolley · DJ sets",
      instagram: "https://www.instagram.com/planetcircle__/"
    };

    const SETS = [
      { title: 'auto', url: 'https://www.youtube.com/watch?v=WeFtZEcNzrg&list=RDWeFtZEcNzrg&start_radio=1', author: 'BROSE', tags: ['techno'] },
      { title: 'auto', url: 'https://www.youtube.com/watch?v=w3VvN3Tkbrg&t=433s', author: 'Alex Mar', tags: ['techno','hardgroove'] },
      { title: 'auto', url: 'https://www.youtube.com/watch?v=6cbU4Xe-ITE&t=1051s', author: 'degrees.', tags: ['ukg','house'] },
      { title: 'auto', url: 'https://youtu.be/7m_Dm0wMFn8?si=4E1PKi4ec1p-mvFF', author: 'Waknu', tags: ['techno'] },
      { title: 'auto', url: 'https://www.youtube.com/watch?v=JWTK5XDIKYw&t=1433s', author: 'Eskape', tags: ['techno'] }
    ];

    // --- Helpers ---
    const ytIdFromUrl = (u) => { try{ const url = new URL(u); if(url.hostname.includes('youtu.be')) return url.pathname.replace('/',''); if(url.searchParams.get('v')) return url.searchParams.get('v'); const p=url.pathname.split('/').filter(Boolean); if(p[0]==='shorts'&&p[1]) return p[1]; if(p[0]==='embed'&&p[1]) return p[1]; return null; }catch(_){ return null } };
    const thumbCandidates = (id)=>[
      `https://i.ytimg.com/vi_webp/${id}/maxresdefault.webp`,
      `https://i.ytimg.com/vi/${id}/maxresdefault.jpg`,
      `https://i.ytimg.com/vi_webp/${id}/sddefault.webp`,
      `https://i.ytimg.com/vi/${id}/sddefault.jpg`,
      `https://i.ytimg.com/vi_webp/${id}/hqdefault.webp`,
      `https://i.ytimg.com/vi/${id}/hqdefault.jpg`,
      `https://i.ytimg.com/vi_webp/${id}/mqdefault.webp`,
      `https://i.ytimg.com/vi/${id}/mqdefault.jpg`,
      `https://i.ytimg.com/vi/${id}/0.jpg`,
      `https://i.ytimg.com/vi/${id}/1.jpg`,
      `https://i.ytimg.com/vi/${id}/2.jpg`,
      `https://i.ytimg.com/vi/${id}/3.jpg`
    ];
    const initials = (str='') => (str.match(/\b\w/g)||[]).slice(0,2).join('').toUpperCase();
    const placeholderThumb = (label='') => {
      const text = initials(label)||'PC';
      const svg = "<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 160 90'>"
        +"<rect width='160' height='90' rx='12' fill='%23E9EEF5'/>"
        +"<text x='50%' y='55%' text-anchor='middle' font-family='system-ui,-apple-system,Segoe UI,Roboto' font-size='36' fill='%230E1114' font-weight='800' letter-spacing='2'>"+text+"</text></svg>";
      return 'data:image/svg+xml;utf8,'+encodeURIComponent(svg);
    };

    document.addEventListener('DOMContentLoaded', () => {
      // Header
      const avatar = document.getElementById('avatar');
      avatar.referrerPolicy = 'no-referrer';
      const savedAvatar = localStorage.getItem('pc_avatar');
      avatar.src = savedAvatar || PROFILE.avatarUrl;
      avatar.onerror = () => { if(PROFILE.avatarAltUrl && avatar.src !== PROFILE.avatarAltUrl){ avatar.src = PROFILE.avatarAltUrl; } };
      document.getElementById('displayName').textContent = PROFILE.displayName;
      document.getElementById('tagline').textContent = PROFILE.tagline;
      document.getElementById('igLink').href = PROFILE.instagram;

      const grid = document.querySelector('.grid');
      const items = SETS.map((s)=>{ const id=ytIdFromUrl(s.url); return { ...s, youtubeId:id, kind: id? 'video':'link' }; });

      function makeThumb(i){
        const img=document.createElement('img');
        img.className='thumb'; img.loading='lazy'; img.alt='Thumbnail'; img.setAttribute('referrerpolicy','no-referrer');
        if(!i.youtubeId){ img.src = placeholderThumb(i.author || i.title || ''); return img; }
        const candidates = (i.thumb ? [i.thumb, ...thumbCandidates(i.youtubeId)] : thumbCandidates(i.youtubeId));
        let k = 0; const tryNext = ()=>{ if(k < candidates.length){ img.src = candidates[k++]; } else { img.onerror=null; img.onload=null; } };
        img.onerror = tryNext; img.onload = ()=>{ if(img.naturalWidth && img.naturalWidth <= 160 && k < candidates.length){ tryNext(); } };
        tryNext();
        return img;
      }

      function render(){
        grid.innerHTML='';
        items.forEach(i=>{
          const card=document.createElement('article'); card.className='card';
          const top=document.createElement('div'); top.className='thumb-wrap';
          top.appendChild(makeThumb(i));
          const bd=document.createElement('span'); bd.className='badge'; bd.textContent = i.youtubeId? 'YouTube':'Link'; top.appendChild(bd);

          const ct=document.createElement('div'); ct.className='content';
          ct.innerHTML = `<h3 class="title">${i.title || 'Loading title…'}</h3>
                          <div class="meta">${i.author || ''}${i.tags && i.tags.length ? ` • ${i.tags.join(' · ')}`:''}</div>
                          <div class="buttons">
                            <a class="btn" href="${i.url}" target="_blank" rel="noopener">Open</a>
                          </div>`;

          card.appendChild(top); card.appendChild(ct); grid.appendChild(card);
        });
      }

      // oEmbed titles + official thumbs
      const pending = [];
      items.forEach((i)=>{
        if(i.youtubeId){
          const oembed = `https://www.youtube.com/oembed?url=https://www.youtube.com/watch?v=${i.youtubeId}&format=json`;
          pending.push(fetch(oembed).then(r=>r.json()).then(d=>{ if(!i.title||i.title==='auto') i.title=d.title; if(d.thumbnail_url) i.thumb=d.thumbnail_url; }).catch(()=>{}));
        }
      });

      render();
      if(pending.length){ Promise.allSettled(pending).then(render); }
    });
  </script>

  <div class="brand-rail" aria-hidden="true"><span>TECHVOLLEY ’25</span></div>

  <div class="wrap">
    <header>
      <div class="pfp"><div class="ring"></div><img id="avatar" alt="avatar" src="" /></div>
      <div class="titles">
        <h1 id="displayName">planetcircle__</h1>
        <div id="tagline" class="tagline">TechnoVolley · DJ sets</div>
      </div>
      <div class="cta">
        <a id="igLink" class="link" href="#" target="_blank" rel="noopener" aria-label="Instagram">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M7 3h10a4 4 0 0 1 4 4v10a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4V7a4 4 0 0 1 4-4Z" stroke="currentColor" stroke-width="1.5"/><circle cx="12" cy="12" r="4" stroke="currentColor" stroke-width="1.5"/><circle cx="17.5" cy="6.5" r="1" fill="currentColor"/></svg>
          Follow
        </a>
      </div>
    </header>

    <section class="grid" aria-live="polite"></section>
  </div>
</body>
</html>
